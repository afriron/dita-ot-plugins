function getMainParent(a){if(null!=a){if(null==a||0==a.length)return null;var b=a.getAttribute("level");if(0==b)return null;do a=a.previousElementSibling,current_level=a.getAttribute("level");while(current_level>=b);return a}}function getMainChilds(a){if(null!=a){var b=a.getAttribute("level"),c=parseInt(b)+1,d=new Array;do{if(a=a.nextElementSibling,null==a)return d;item_level=a.getAttribute("level"),item_level==c&&d.push(a)}while(item_level>b);return d}}function openChilds(a,b){if(null!=a){var c=getMainChilds(a);for(i=0;i<c.length;i++){var d=c[i];b.push(d)}}}function openTree(a){if(null!=a){var b=new Array;divs=document.getElementsByTagName("div");for(var c=0;c<divs.length;c++)divs[c].className=divs[c].className.replace(/\bisactive\b/,"").replace(/\bisopen\b/,"");a.className+=" isactive ";do openChilds(a,b),a.className+=" isopen ";while(null!=(a=getMainParent(a)));for(var c=0;c<b.length;c++){for(var d=0;d<open_menuItem.length;d++)null!=open_menuItem[d]&&open_menuItem[d].getAttribute("id")==b[c].getAttribute("id")&&(open_menuItem[d]=null);0==hasClass(b[c],"isshow")&&(b[c].className+=" isshow ")}for(;0!=open_menuItem.length;){var e=open_menuItem.pop();null!=e&&(e.className=e.className.replace(/\bisshow\b/,""))}open_menuItem=b}}function openMenuTree(a){if(current_a_url!=a){current_a_url=a;var b=document.querySelector('a[href="'+a+'"]');b&&(openTree(b.parentElement),b.scrollIntoView())}}function hasClass(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1}function openTreeMessage(a){openMenuTree(a.data)}var open_menuItem=new Array,current_a_url;window.onload=function(){for(var a=document.getElementsByTagName("a"),b=0,c=a.length;b<c;b++)a[b].onclick=function(){current_a_url=this.getAttribute("href"),openTree(this.parentElement)}},window.addEventListener&&window.addEventListener("message",openTreeMessage,!1);